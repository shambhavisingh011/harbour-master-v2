
PLAY [Phase 0 - Infrastructure Handshake Preparation] **************************

TASK [Ensure LVS files directory exists] ***************************************
[0;32mok: [localhost][0m

TASK [Generate SSH keypair for LVS Health Checks] ******************************
[0;32mok: [localhost][0m

PLAY [Phase 1 - Prepare All Nodes] *********************************************

TASK [Gathering Facts] *********************************************************
[1;35m[WARNING]: Host 'db-node-01' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [db-node-01][0m
[1;35m[WARNING]: Host 'async-node' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [async-node][0m

TASK [Wait for apt lock to be released] ****************************************
[0;33mchanged: [db-node-01][0m
[0;33mchanged: [async-node][0m

TASK [Install basic utilities] *************************************************
[0;32mok: [db-node-01][0m
[0;32mok: [async-node][0m

PLAY [Phase 1 - Prepare All Nodes] *********************************************

TASK [Gathering Facts] *********************************************************
[1;35m[WARNING]: Host 'db-node-03' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [db-node-03][0m
[1;35m[WARNING]: Host 'db-node-02' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [db-node-02][0m

TASK [Wait for apt lock to be released] ****************************************
[0;33mchanged: [db-node-02][0m
[0;33mchanged: [db-node-03][0m

TASK [Install basic utilities] *************************************************
[0;32mok: [db-node-02][0m
[0;32mok: [db-node-03][0m

PLAY [Phase 1 - Prepare All Nodes] *********************************************

TASK [Gathering Facts] *********************************************************
[1;35m[WARNING]: Host 'lvs-node-2' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [lvs-node-2][0m
[1;35m[WARNING]: Host 'lvs-node-1' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [lvs-node-1][0m

TASK [Wait for apt lock to be released] ****************************************
[0;33mchanged: [lvs-node-1][0m
[0;33mchanged: [lvs-node-2][0m

TASK [Install basic utilities] *************************************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

PLAY [Phase 1 - Prepare All Nodes] *********************************************

TASK [Gathering Facts] *********************************************************
[1;35m[WARNING]: Host 'monitor-node' is using the discovered Python interpreter at '/usr/bin/python3.12', but future installation of another Python interpreter could cause a different interpreter to be discovered. See https://docs.ansible.com/ansible-core/2.20/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [monitor-node][0m

TASK [Wait for apt lock to be released] ****************************************
[0;33mchanged: [monitor-node][0m

TASK [Install basic utilities] *************************************************
[0;32mok: [monitor-node][0m

PLAY [Phase 2 - Setup MariaDB Repositories] ************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-01][0m
[0;32mok: [db-node-02][0m

TASK [common : Update apt cache] ***********************************************
[0;33mchanged: [db-node-01][0m
[0;33mchanged: [db-node-02][0m

TASK [common : Install dependencies] *******************************************
[0;32mok: [db-node-01][0m
[0;32mok: [db-node-02][0m

TASK [common : Add MariaDB GPG key] ********************************************
[0;32mok: [db-node-01][0m
[0;32mok: [db-node-02][0m

TASK [common : Add MariaDB Repository for version 10.11] ***********************
[1;35m[WARNING]: Deprecation warnings can be disabled by setting `deprecation_warnings=False` in ansible.cfg.[0m
[0;35m[0m
[0;32mok: [db-node-01][0m
[0;32mok: [db-node-02][0m

TASK [common : Update apt cache after adding repo] *****************************
[0;33mchanged: [db-node-01][0m
[0;33mchanged: [db-node-02][0m

PLAY [Phase 2 - Setup MariaDB Repositories] ************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-03][0m
[0;32mok: [async-node][0m

TASK [common : Update apt cache] ***********************************************
[0;33mchanged: [db-node-03][0m
[0;33mchanged: [async-node][0m

TASK [common : Install dependencies] *******************************************
[0;32mok: [db-node-03][0m
[0;32mok: [async-node][0m

TASK [common : Add MariaDB GPG key] ********************************************
[0;32mok: [db-node-03][0m
[0;32mok: [async-node][0m

TASK [common : Add MariaDB Repository for version 10.11] ***********************
[0;32mok: [db-node-03][0m
[0;32mok: [async-node][0m

TASK [common : Update apt cache after adding repo] *****************************
[0;33mchanged: [db-node-03][0m
[0;33mchanged: [async-node][0m

PLAY [Phase 3 - Build Galera Cluster] ******************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-01][0m

TASK [galera : Install MariaDB Server and Galera dependencies] *****************
[0;32mok: [db-node-01][0m

TASK [galera : Stop MariaDB to prevent standalone mode conflicts] **************
[0;33mchanged: [db-node-01][0m

TASK [galera : Disable default bind-address in 50-server.cnf] ******************
[0;32mok: [db-node-01][0m

TASK [galera : Deploy Galera Configuration] ************************************
[0;32mok: [db-node-01][0m

TASK [galera : Initialize MariaDB data directory if empty] *********************
[0;32mok: [db-node-01][0m

TASK [galera : Check if grastate.dat exists] ***********************************
[0;32mok: [db-node-01][0m

TASK [galera : Set safe_to_bootstrap flag in grastate.dat] *********************
[0;32mok: [db-node-01][0m

TASK [galera : Execute Galera New Cluster command] *****************************
[0;33mchanged: [db-node-01][0m

TASK [galera : Wait for Primary Node to be ready] ******************************
[0;32mok: [db-node-01][0m

TASK [galera : Join Secondary Nodes to Cluster] ********************************
[0;36mskipping: [db-node-01][0m

TASK [galera : RECOVERY: Wipe corrupted state if Join failed] ******************
[0;36mskipping: [db-node-01] => (item=grastate.dat) [0m
[0;36mskipping: [db-node-01] => (item=galera.cache) [0m
[0;36mskipping: [db-node-01][0m

TASK [galera : RETRY: Start MariaDB after state wipe] **************************
[0;36mskipping: [db-node-01][0m

TASK [galera : SSH: Ensure .ssh directory exists for root] *********************
[0;32mok: [db-node-01][0m

TASK [galera : SSH: Authorize LVS Health Check Key] ****************************
[0;35m[DEPRECATION WARNING]: Importing 'to_native' from 'ansible.module_utils._text' is deprecated. This feature will be removed from ansible-core version 2.24. Use ansible.module_utils.common.text.converters instead.[0m
[0;32mok: [db-node-01][0m

TASK [galera : SSH: Allow root login via key] **********************************
[0;32mok: [db-node-01][0m

TASK [galera : LVS-DR: Add VIP to loopback interface] **************************
[0;32mok: [db-node-01][0m

TASK [galera : LVS-DR: Apply ARP Suppression] **********************************
[0;32mok: [db-node-01] => (item={'key': 'net.ipv4.conf.all.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-01] => (item={'key': 'net.ipv4.conf.all.arp_announce', 'value': '2'})[0m
[0;32mok: [db-node-01] => (item={'key': 'net.ipv4.conf.lo.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-01] => (item={'key': 'net.ipv4.conf.lo.arp_announce', 'value': '2'})[0m

TASK [galera : HCIP: Load dummy network module] ********************************
[0;32mok: [db-node-01][0m

TASK [galera : HCIP: Create dummy0 network interface] **************************
[0;33mchanged: [db-node-01][0m

TASK [galera : HCIP: Deploy Keepalived Healthcheck Script] *********************
[0;32mok: [db-node-01][0m

TASK [galera : HCIP: Deploy Keepalived Configuration for DB nodes] *************
[0;35m[0m
[0;32mok: [db-node-01][0m

TASK [galera : HCIP: Ensure Keepalived is started on DB Nodes] *****************
[0;32mok: [db-node-01][0m

TASK [galera : [Self-Healing] Wait for Node to finish Sync] ********************
[0;32mok: [db-node-01][0m

TASK [galera : Create SST User for replication] ********************************
[0;32mok: [db-node-01][0m

TASK [galera : Allow Root Access from Remote Network] **************************
[0;32mok: [db-node-01] => (item=%)[0m
[0;32mok: [db-node-01] => (item=localhost)[0m

PLAY [Phase 3 - Build Galera Cluster] ******************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-02][0m

TASK [galera : Install MariaDB Server and Galera dependencies] *****************
[0;32mok: [db-node-02][0m

TASK [galera : Stop MariaDB to prevent standalone mode conflicts] **************
[0;33mchanged: [db-node-02][0m

TASK [galera : Disable default bind-address in 50-server.cnf] ******************
[0;32mok: [db-node-02][0m

TASK [galera : Deploy Galera Configuration] ************************************
[0;32mok: [db-node-02][0m

TASK [galera : Initialize MariaDB data directory if empty] *********************
[0;32mok: [db-node-02][0m

TASK [galera : Check if grastate.dat exists] ***********************************
[0;32mok: [db-node-02][0m

TASK [galera : Set safe_to_bootstrap flag in grastate.dat] *********************
[0;36mskipping: [db-node-02][0m

TASK [galera : Execute Galera New Cluster command] *****************************
[0;36mskipping: [db-node-02][0m

TASK [galera : Wait for Primary Node to be ready] ******************************
[0;36mskipping: [db-node-02][0m

TASK [galera : Join Secondary Nodes to Cluster] ********************************
[0;31m[ERROR]: Task failed: Module failed: Unable to start service mariadb: Job for mariadb.service failed because the control process exited with error code.[0m
[0;31mSee "systemctl status mariadb.service" and "journalctl -xeu mariadb.service" for details.[0m
[0;31m[0m
[0;31mOrigin: /home/ubuntu/harbour-master/backend/ansible/roles/galera/tasks/main.yml:73:3[0m
[0;31m[0m
[0;31m71[0m
[0;31m72 # 6. Join Secondary Nodes with Recovery Logic[0m
[0;31m73 - name: "Join Secondary Nodes to Cluster"[0m
[0;31m     ^ column 3[0m
[0;31m[0m
[0;31mfatal: [db-node-02]: FAILED! => {"changed": false, "msg": "Unable to start service mariadb: Job for mariadb.service failed because the control process exited with error code.\nSee \"systemctl status mariadb.service\" and \"journalctl -xeu mariadb.service\" for details.\n"}[0m
[0;36m...ignoring[0m

TASK [galera : RECOVERY: Wipe corrupted state if Join failed] ******************
[0;33mchanged: [db-node-02] => (item=grastate.dat)[0m
[0;33mchanged: [db-node-02] => (item=galera.cache)[0m

TASK [galera : RETRY: Start MariaDB after state wipe] **************************
[0;33mchanged: [db-node-02][0m

TASK [galera : SSH: Ensure .ssh directory exists for root] *********************
[0;32mok: [db-node-02][0m

TASK [galera : SSH: Authorize LVS Health Check Key] ****************************
[0;32mok: [db-node-02][0m

TASK [galera : SSH: Allow root login via key] **********************************
[0;32mok: [db-node-02][0m

TASK [galera : LVS-DR: Add VIP to loopback interface] **************************
[0;32mok: [db-node-02][0m

TASK [galera : LVS-DR: Apply ARP Suppression] **********************************
[0;32mok: [db-node-02] => (item={'key': 'net.ipv4.conf.all.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-02] => (item={'key': 'net.ipv4.conf.all.arp_announce', 'value': '2'})[0m
[0;32mok: [db-node-02] => (item={'key': 'net.ipv4.conf.lo.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-02] => (item={'key': 'net.ipv4.conf.lo.arp_announce', 'value': '2'})[0m

TASK [galera : HCIP: Load dummy network module] ********************************
[0;32mok: [db-node-02][0m

TASK [galera : HCIP: Create dummy0 network interface] **************************
[0;33mchanged: [db-node-02][0m

TASK [galera : HCIP: Deploy Keepalived Healthcheck Script] *********************
[0;32mok: [db-node-02][0m

TASK [galera : HCIP: Deploy Keepalived Configuration for DB nodes] *************
[0;32mok: [db-node-02][0m

TASK [galera : HCIP: Ensure Keepalived is started on DB Nodes] *****************
[0;32mok: [db-node-02][0m

TASK [galera : [Self-Healing] Wait for Node to finish Sync] ********************
[0;32mok: [db-node-02][0m

TASK [galera : Create SST User for replication] ********************************
[0;32mok: [db-node-02][0m

TASK [galera : Allow Root Access from Remote Network] **************************
[0;32mok: [db-node-02] => (item=%)[0m
[0;32mok: [db-node-02] => (item=localhost)[0m

PLAY [Phase 3 - Build Galera Cluster] ******************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-03][0m

TASK [galera : Install MariaDB Server and Galera dependencies] *****************
[0;32mok: [db-node-03][0m

TASK [galera : Stop MariaDB to prevent standalone mode conflicts] **************
[0;33mchanged: [db-node-03][0m

TASK [galera : Disable default bind-address in 50-server.cnf] ******************
[0;32mok: [db-node-03][0m

TASK [galera : Deploy Galera Configuration] ************************************
[0;32mok: [db-node-03][0m

TASK [galera : Initialize MariaDB data directory if empty] *********************
[0;32mok: [db-node-03][0m

TASK [galera : Check if grastate.dat exists] ***********************************
[0;32mok: [db-node-03][0m

TASK [galera : Set safe_to_bootstrap flag in grastate.dat] *********************
[0;36mskipping: [db-node-03][0m

TASK [galera : Execute Galera New Cluster command] *****************************
[0;36mskipping: [db-node-03][0m

TASK [galera : Wait for Primary Node to be ready] ******************************
[0;36mskipping: [db-node-03][0m

TASK [galera : Join Secondary Nodes to Cluster] ********************************
[0;33mchanged: [db-node-03][0m

TASK [galera : RECOVERY: Wipe corrupted state if Join failed] ******************
[0;36mskipping: [db-node-03] => (item=grastate.dat) [0m
[0;36mskipping: [db-node-03] => (item=galera.cache) [0m
[0;36mskipping: [db-node-03][0m

TASK [galera : RETRY: Start MariaDB after state wipe] **************************
[0;36mskipping: [db-node-03][0m

TASK [galera : SSH: Ensure .ssh directory exists for root] *********************
[0;32mok: [db-node-03][0m

TASK [galera : SSH: Authorize LVS Health Check Key] ****************************
[0;32mok: [db-node-03][0m

TASK [galera : SSH: Allow root login via key] **********************************
[0;32mok: [db-node-03][0m

TASK [galera : LVS-DR: Add VIP to loopback interface] **************************
[0;32mok: [db-node-03][0m

TASK [galera : LVS-DR: Apply ARP Suppression] **********************************
[0;32mok: [db-node-03] => (item={'key': 'net.ipv4.conf.all.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-03] => (item={'key': 'net.ipv4.conf.all.arp_announce', 'value': '2'})[0m
[0;32mok: [db-node-03] => (item={'key': 'net.ipv4.conf.lo.arp_ignore', 'value': '1'})[0m
[0;32mok: [db-node-03] => (item={'key': 'net.ipv4.conf.lo.arp_announce', 'value': '2'})[0m

TASK [galera : HCIP: Load dummy network module] ********************************
[0;36mskipping: [db-node-03][0m

TASK [galera : HCIP: Create dummy0 network interface] **************************
[0;36mskipping: [db-node-03][0m

TASK [galera : HCIP: Deploy Keepalived Healthcheck Script] *********************
[0;36mskipping: [db-node-03][0m

TASK [galera : HCIP: Deploy Keepalived Configuration for DB nodes] *************
[0;36mskipping: [db-node-03][0m

TASK [galera : HCIP: Ensure Keepalived is started on DB Nodes] *****************
[0;36mskipping: [db-node-03][0m

TASK [galera : [Self-Healing] Wait for Node to finish Sync] ********************
[0;32mok: [db-node-03][0m

TASK [galera : Create SST User for replication] ********************************
[0;32mok: [db-node-03][0m

TASK [galera : Allow Root Access from Remote Network] **************************
[0;32mok: [db-node-03] => (item=%)[0m
[0;32mok: [db-node-03] => (item=localhost)[0m

PLAY [Setup LVS Load Balancers] ************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [lvs-node-2][0m
[0;32mok: [lvs-node-1][0m

TASK [lvs : Install LVS and Keepalived dependencies] ***************************
[0;32mok: [lvs-node-2][0m
[0;32mok: [lvs-node-1][0m

TASK [lvs : Enable IPv4 forwarding] ********************************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

TASK [lvs : Ensure .ssh directory exists for root] *****************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

TASK [lvs : Deploy SSH Private Key for LVS Health Checks] **********************
[0;32mok: [lvs-node-2][0m
[0;32mok: [lvs-node-1][0m

TASK [lvs : Deploy LVS Health Check script] ************************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

TASK [lvs : Deploy Keepalived configuration from template] *********************
[0;35m[DEPRECATION WARNING]: INJECT_FACTS_AS_VARS default to `True` is deprecated, top-level facts will not be auto injected after the change. This feature will be removed from ansible-core version 2.24.[0m
[0;35m[0m
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

TASK [lvs : Start and Enable Keepalived] ***************************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

PLAY [Configure Async Replica] *************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [async-node][0m

TASK [async_replica : Ensure MariaDB Server is installed on Async Node] ********
[0;32mok: [async-node][0m

TASK [async_replica : Identify Healthy Galera Nodes] ***************************
[0;32mok: [async-node -> db-node-01(192.168.64.2)] => (item=db-node-01)[0m
[0;32mok: [async-node -> db-node-02(192.168.64.3)] => (item=db-node-02)[0m
[0;32mok: [async-node -> db-node-03(192.168.64.7)] => (item=db-node-03)[0m

TASK [async_replica : Set Active Galera Master Fact] ***************************
[0;32mok: [async-node][0m

TASK [async_replica : Check current Replication Status on Async Node] **********
[0;32mok: [async-node][0m

TASK [async_replica : Set Replication Health Fact] *****************************
[0;32mok: [async-node][0m

TASK [async_replica : Ensure Replication User has access from Async Node IP] ***
[0;32mok: [async-node -> db-node-02(192.168.64.3)][0m

TASK [async_replica : Ensure MariaDB config directory exists] ******************
[0;32mok: [async-node][0m

TASK [async_replica : Apply Standalone Replica Configuration] ******************
[0;32mok: [async-node][0m

TASK [async_replica : Grant Control Node access to Async Node for Diagnostics] ***
[0;35m[0m
[0;32mok: [async-node][0m

TASK [async_replica : Restart MariaDB to apply configs] ************************
[0;36mskipping: [async-node][0m

TASK [async_replica : Hard Reset Slave State for GTID alignment] ***************
[0;33mchanged: [async-node][0m

TASK [async_replica : Get Master GTID Position] ********************************
[0;33mchanged: [async-node -> db-node-02(192.168.64.3)][0m

TASK [async_replica : Align Slave GTID position] *******************************
[0;33mchanged: [async-node][0m

TASK [async_replica : Configure Master Handshake] ******************************
[0;33mchanged: [async-node][0m

TASK [async_replica : Start Replication] ***************************************
[0;33mchanged: [async-node][0m

TASK [async_replica : Verify Replication Status] *******************************
[0;33mchanged: [async-node][0m

PLAY [Deploy Monitoring Stack] *************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-01][0m
[0;32mok: [async-node][0m

TASK [monitoring : [SERVER] Deploy Prometheus and Grafana Engine] **************
[0;36mskipping: [async-node][0m
[0;36mskipping: [db-node-01][0m

TASK [monitoring : [CLIENT] Deploy Metrics Exporters] **************************
[0;36mincluded: /home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/exporters.yml for async-node, db-node-01[0m

TASK [monitoring : Install Node and MySQL Exporters] ***************************
[0;32mok: [db-node-01][0m
[0;32mok: [async-node][0m

TASK [monitoring : [Gatekeeper] Check Galera Sync Status] **********************
[0;36mskipping: [async-node][0m
[0;33mchanged: [db-node-01][0m

TASK [monitoring : [Recovery] Force Bootstrap or Restart on Primary Node if stuck] ***
[0;36mskipping: [async-node][0m
[0;33mchanged: [db-node-01][0m

TASK [monitoring : [Gatekeeper] Final Wait for Cluster Connectivity] ***********
[0;36mskipping: [async-node][0m
[0;33mchanged: [db-node-01][0m

TASK [monitoring : Create MariaDB Exporter User] *******************************
[0;31m[ERROR]: Task failed: Module failed: (1047, 'WSREP has not yet prepared node for application use')[0m
[0;31mOrigin: /home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/exporters.yml:69:3[0m
[0;31m[0m
[0;31m67     - cluster_status.stdout != "Standalone"[0m
[0;31m68[0m
[0;31m69 - name: Create MariaDB Exporter User[0m
[0;31m     ^ column 3[0m
[0;31m[0m
[0;31mfatal: [db-node-01]: FAILED! => {"changed": false, "msg": "Task failed: Module failed: (1047, 'WSREP has not yet prepared node for application use')"}[0m
[0;32mok: [async-node][0m

TASK [monitoring : Configure MySQL Exporter Auth] ******************************
[0;32mok: [async-node][0m

TASK [monitoring : Set MySQL Exporter Flags] ***********************************
[0;32mok: [async-node][0m

TASK [monitoring : Restart and Enable Monitoring Agents] ***********************
[0;36mskipping: [async-node] => (item=prometheus-node-exporter) [0m
[0;36mskipping: [async-node] => (item=prometheus-mysqld-exporter) [0m
[0;36mskipping: [async-node][0m

TASK [monitoring : Ensure Node Exporter is active on non-DB nodes] *************
[0;36mskipping: [async-node][0m

PLAY [Deploy Monitoring Stack] *************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [db-node-02][0m
[0;32mok: [db-node-03][0m

TASK [monitoring : [SERVER] Deploy Prometheus and Grafana Engine] **************
[0;36mskipping: [db-node-02][0m
[0;36mskipping: [db-node-03][0m

TASK [monitoring : [CLIENT] Deploy Metrics Exporters] **************************
[0;36mincluded: /home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/exporters.yml for db-node-02, db-node-03[0m

TASK [monitoring : Install Node and MySQL Exporters] ***************************
[0;32mok: [db-node-02][0m
[0;32mok: [db-node-03][0m

TASK [monitoring : [Gatekeeper] Check Galera Sync Status] **********************
[0;33mchanged: [db-node-02][0m
[0;33mchanged: [db-node-03][0m

TASK [monitoring : [Recovery] Force Bootstrap or Restart on Primary Node if stuck] ***
[0;36mskipping: [db-node-02][0m
[0;36mskipping: [db-node-03][0m

TASK [monitoring : [Gatekeeper] Final Wait for Cluster Connectivity] ***********
[0;36mskipping: [db-node-02][0m
[0;36mskipping: [db-node-03][0m

TASK [monitoring : Create MariaDB Exporter User] *******************************
[0;33mchanged: [db-node-03][0m
[0;32mok: [db-node-02][0m

TASK [monitoring : Configure MySQL Exporter Auth] ******************************
[0;32mok: [db-node-02][0m
[0;32mok: [db-node-03][0m

TASK [monitoring : Set MySQL Exporter Flags] ***********************************
[0;32mok: [db-node-02][0m
[0;32mok: [db-node-03][0m

TASK [monitoring : Restart and Enable Monitoring Agents] ***********************
[0;36mskipping: [db-node-02] => (item=prometheus-node-exporter) [0m
[0;36mskipping: [db-node-02] => (item=prometheus-mysqld-exporter) [0m
[0;36mskipping: [db-node-02][0m
[0;36mskipping: [db-node-03] => (item=prometheus-node-exporter) [0m
[0;36mskipping: [db-node-03] => (item=prometheus-mysqld-exporter) [0m
[0;36mskipping: [db-node-03][0m

TASK [monitoring : Ensure Node Exporter is active on non-DB nodes] *************
[0;36mskipping: [db-node-02][0m
[0;36mskipping: [db-node-03][0m

PLAY [Deploy Monitoring Stack] *************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

TASK [monitoring : [SERVER] Deploy Prometheus and Grafana Engine] **************
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : [CLIENT] Deploy Metrics Exporters] **************************
[0;36mincluded: /home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/exporters.yml for lvs-node-1, lvs-node-2[0m

TASK [monitoring : Install Node and MySQL Exporters] ***************************
[0;32mok: [lvs-node-2][0m
[0;32mok: [lvs-node-1][0m

TASK [monitoring : [Gatekeeper] Check Galera Sync Status] **********************
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : [Recovery] Force Bootstrap or Restart on Primary Node if stuck] ***
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : [Gatekeeper] Final Wait for Cluster Connectivity] ***********
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : Create MariaDB Exporter User] *******************************
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : Configure MySQL Exporter Auth] ******************************
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : Set MySQL Exporter Flags] ***********************************
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : Restart and Enable Monitoring Agents] ***********************
[0;36mskipping: [lvs-node-1] => (item=prometheus-node-exporter) [0m
[0;36mskipping: [lvs-node-1] => (item=prometheus-mysqld-exporter) [0m
[0;36mskipping: [lvs-node-1][0m
[0;36mskipping: [lvs-node-2] => (item=prometheus-node-exporter) [0m
[0;36mskipping: [lvs-node-2] => (item=prometheus-mysqld-exporter) [0m
[0;36mskipping: [lvs-node-2][0m

TASK [monitoring : Ensure Node Exporter is active on non-DB nodes] *************
[0;32mok: [lvs-node-1][0m
[0;32mok: [lvs-node-2][0m

PLAY [Deploy Monitoring Stack] *************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [monitor-node][0m

TASK [monitoring : [SERVER] Deploy Prometheus and Grafana Engine] **************
[0;36mincluded: /home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/server.yml for monitor-node[0m

TASK [monitoring : Install dependencies for Grafana] ***************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Create directory for APT keyrings] **************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Import Grafana GPG key] *************************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Add Grafana official APT repository (Low Memory Version)] ***
[0;33mchanged: [monitor-node][0m

TASK [monitoring : Update apt cache manually] **********************************
[0;33mchanged: [monitor-node][0m

TASK [monitoring : Install Prometheus and Grafana] *****************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Create Provisioning Directories] ****************************
[0;32mok: [monitor-node] => (item=/etc/grafana/provisioning/datasources)[0m
[0;32mok: [monitor-node] => (item=/etc/grafana/provisioning/dashboards)[0m
[0;32mok: [monitor-node] => (item=/var/lib/grafana/dashboards)[0m

TASK [monitoring : Deploy Prometheus Configuration] ****************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Provision Data Source (Prometheus)] *************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Provision Dashboard Provider] *******************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Sync Static Dashboard JSON Files] ***************************
[0;32mok: [monitor-node][0m

TASK [monitoring : Render Custom Galera Dashboard Template] ********************
[0;32mok: [monitor-node][0m

TASK [monitoring : Force systemd to recognize new units] ***********************
[0;32mok: [monitor-node][0m

TASK [monitoring : Start and Enable Services] **********************************
[0;32mok: [monitor-node] => (item=prometheus)[0m
[0;32mok: [monitor-node] => (item=grafana-server)[0m

TASK [monitoring : Final Service Check and Restart] ****************************
[0;33mchanged: [monitor-node][0m

TASK [monitoring : [CLIENT] Deploy Metrics Exporters] **************************
[0;36mskipping: [monitor-node][0m

PLAY RECAP *********************************************************************
[0;33masync-node[0m                 : [0;32mok=31  [0m [0;33mchanged=9   [0m unreachable=0    failed=0    [0;36mskipped=7   [0m rescued=0    ignored=0   
[0;31mdb-node-01[0m                 : [0;32mok=38  [0m [0;33mchanged=9   [0m unreachable=0    [0;31mfailed=1   [0m [0;36mskipped=4   [0m rescued=0    ignored=0   
[0;33mdb-node-02[0m                 : [0;32mok=39  [0m [0;33mchanged=8   [0m unreachable=0    failed=0    [0;36mskipped=8   [0m rescued=0    [1;35mignored=1   [0m
[0;33mdb-node-03[0m                 : [0;32mok=32  [0m [0;33mchanged=7   [0m unreachable=0    failed=0    [0;36mskipped=15  [0m rescued=0    ignored=0   
[0;32mlocalhost[0m                  : [0;32mok=2   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[0;33mlvs-node-1[0m                 : [0;32mok=15  [0m [0;33mchanged=1   [0m unreachable=0    failed=0    [0;36mskipped=8   [0m rescued=0    ignored=0   
[0;33mlvs-node-2[0m                 : [0;32mok=15  [0m [0;33mchanged=1   [0m unreachable=0    failed=0    [0;36mskipped=8   [0m rescued=0    ignored=0   
[0;33mmonitor-node[0m               : [0;32mok=20  [0m [0;33mchanged=4   [0m unreachable=0    failed=0    [0;36mskipped=1   [0m rescued=0    ignored=0   
