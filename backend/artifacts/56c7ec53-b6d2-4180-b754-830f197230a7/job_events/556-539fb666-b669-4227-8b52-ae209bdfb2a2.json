{"uuid": "539fb666-b669-4227-8b52-ae209bdfb2a2", "counter": 556, "stdout": "\u001b[0;33mchanged: [db-node-01]\u001b[0m", "start_line": 533, "end_line": 534, "runner_ident": "56c7ec53-b6d2-4180-b754-830f197230a7", "event": "runner_on_ok", "pid": 63014, "created": "2026-02-19T20:01:18.512249+00:00", "parent_uuid": "5254000e-bcee-de6e-e22a-0000000003ac", "event_data": {"playbook": "/home/ubuntu/harbour-master/backend/ansible/deploy_cluster.yml", "playbook_uuid": "4fd4f1a4-1e1d-4e37-be08-bd915ef950e9", "play": "Deploy Monitoring Stack", "play_uuid": "5254000e-bcee-de6e-e22a-000000000064", "play_pattern": "all", "task": "[Recovery] Force Bootstrap or Restart on Primary Node if stuck", "task_uuid": "5254000e-bcee-de6e-e22a-0000000003ac", "task_action": "shell", "resolved_action": "ansible.builtin.shell", "task_args": "", "task_path": "/home/ubuntu/harbour-master/backend/ansible/roles/monitoring/tasks/exporters.yml:30", "role": "monitoring", "host": "db-node-01", "remote_addr": "db-node-01", "res": {"changed": true, "stdout": "", "stderr": "/bin/sh: 5: [: Disconnected: unexpected operator\n/bin/sh: 12: [: Initialized: unexpected operator", "rc": 0, "cmd": "PASS=\"StrongPass123!\"\n# Check if the cluster is in a non-primary state (split-brain)\nCS=$(mariadb -u root -p\"$PASS\" -N -s -e \"SHOW STATUS LIKE 'wsrep_cluster_status';\" | awk '{print $2}')\n\nif [ \"$CS\" == \"NON-PRIMARY\" ]; then\n   mariadb -u root -p\"$PASS\" -e \"SET GLOBAL wsrep_provider_options='pc.bootstrap=YES';\"\n   sleep 5\nfi\n\n# If still Initialized after bootstrap attempt, force a service restart to re-probe gcomm\nCURRENT=$(mariadb -u root -p\"$PASS\" -N -s -e \"SHOW STATUS LIKE 'wsrep_local_state_comment';\" | awk '{print $2}')\nif [ \"$CURRENT\" == \"Initialized\" ]; then\n   systemctl restart mariadb\nfi\n", "start": "2026-02-20 01:28:13.680515", "end": "2026-02-20 01:28:13.689743", "delta": "0:00:00.009228", "msg": "", "invocation": {"module_args": {"_raw_params": "PASS=\"StrongPass123!\"\n# Check if the cluster is in a non-primary state (split-brain)\nCS=$(mariadb -u root -p\"$PASS\" -N -s -e \"SHOW STATUS LIKE 'wsrep_cluster_status';\" | awk '{print $2}')\n\nif [ \"$CS\" == \"NON-PRIMARY\" ]; then\n   mariadb -u root -p\"$PASS\" -e \"SET GLOBAL wsrep_provider_options='pc.bootstrap=YES';\"\n   sleep 5\nfi\n\n# If still Initialized after bootstrap attempt, force a service restart to re-probe gcomm\nCURRENT=$(mariadb -u root -p\"$PASS\" -N -s -e \"SHOW STATUS LIKE 'wsrep_local_state_comment';\" | awk '{print $2}')\nif [ \"$CURRENT\" == \"Initialized\" ]; then\n   systemctl restart mariadb\nfi\n", "_uses_shell": true, "expand_argument_vars": true, "stdin_add_newline": true, "strip_empty_ends": true, "cmd": null, "argv": null, "chdir": null, "executable": null, "creates": null, "removes": null, "stdin": null}}, "stdout_lines": [], "stderr_lines": ["/bin/sh: 5: [: Disconnected: unexpected operator", "/bin/sh: 12: [: Initialized: unexpected operator"], "_ansible_no_log": false}, "start": "2026-02-19T20:01:18.313913+00:00", "end": "2026-02-19T20:01:18.512124+00:00", "duration": 0.198211, "event_loop": null, "uuid": "539fb666-b669-4227-8b52-ae209bdfb2a2"}}